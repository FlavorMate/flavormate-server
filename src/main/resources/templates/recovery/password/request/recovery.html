{#include layouts/main} {#body}
<form method="POST">
  <section class="content">
    <p class="h4 text-primary">{msg:passwordRecovery_title}</p>
    <p>
      {msg:passwordRecovery_hint1}<br />
      {msg:passwordRecovery_hint2}
    </p>
    <ul class="password-requirements">
      <li id="bullet-length">{msg:passwordRecovery_requirement1}</li>
      <li id="bullet-lowercase">{msg:passwordRecovery_requirement2}</li>
      <li id="bullet-uppercase">{msg:passwordRecovery_requirement3}</li>
      <li id="bullet-specialcase">{msg:passwordRecovery_requirement4}</li>
      <li id="bullet-number">{msg:passwordRecovery_requirement5}</li>
    </ul>
    <p class="center-content">
      <label for="password"> {msg:passwordRecovery_newPassword} </label>
      <br />
      <input
        class="input"
        id="password"
        name="password"
        pattern="^(?=.*[a-z])(?=.*[A-Z])(?=.*\W)(?=.*[0-9]).\{8,}$"
        required
        type="password"
      />
      <input id="togglePassword" type="checkbox" />
      <label class="toggle-password-label" for="togglePassword">
        {msg:passwordRecovery_showPassword}
      </label>
    </p>
    <p class="center-content">
      <button class="btn" type="submit">
        {msg:passwordRecovery_savePassword}
      </button>
    </p>
  </section>
</form>
<script>
  const lengthRegex = new RegExp("^.\{8,}$");
  const lowercaseRegex = new RegExp("^(?=.*[a-z]).+$");
  const uppercaseRegex = new RegExp("^(?=.*[A-Z]).+$");
  const specialcaseRegex = new RegExp("^(?=.*\\W).+$");
  const numberRegex = new RegExp("^(?=.*[0-9]).+$");

  const bulletLength = document.querySelector("#bullet-length");
  const bulletLowercase = document.querySelector("#bullet-lowercase");
  const bulletUppercase = document.querySelector("#bullet-uppercase");
  const bulletSpecialcase = document.querySelector("#bullet-specialcase");
  const bulletNumber = document.querySelector("#bullet-number");

  const passwordField = document.querySelector("#password");
  passwordField.addEventListener("input", function (_) {
    if (lengthRegex.test(this.value)) {
      bulletLength.style.listStyleType = '"✅"';
    } else {
      bulletLength.style.listStyleType = '"❌"';
    }

    if (lowercaseRegex.test(this.value)) {
      bulletLowercase.style.listStyleType = '"✅"';
    } else {
      bulletLowercase.style.listStyleType = '"❌"';
    }

    if (uppercaseRegex.test(this.value)) {
      bulletUppercase.style.listStyleType = '"✅"';
    } else {
      bulletUppercase.style.listStyleType = '"❌"';
    }

    if (specialcaseRegex.test(this.value)) {
      bulletSpecialcase.style.listStyleType = '"✅"';
    } else {
      bulletSpecialcase.style.listStyleType = '"❌"';
    }

    if (numberRegex.test(this.value)) {
      bulletNumber.style.listStyleType = '"✅"';
    } else {
      bulletNumber.style.listStyleType = '"❌"';
    }
  });

  const togglePassword = document.querySelector("#togglePassword");
  const password = document.querySelector("#password");
  togglePassword.addEventListener("click", function () {
    password.type = password.type === "password" ? "text" : "password";
  });
</script>

{/body} {/include}
